# Nome do Workflow: VisÃ­vel na aba "Actions" do GitHub
name: 01 - Nosso Primeiro Workflow

# Gatilho (Trigger): Define quando o workflow serÃ¡ executado.
on:
  # Executa em todo push para a branch 'main'
  push:
    branches: [ "main" ]
  
  # Permite que o workflow seja executado manualmente a partir da interface do GitHub
  workflow_dispatch:

# VariÃ¡veis globais do workflow
env:
  NOME_PROJETO: "GitHub Actions CI/CD"
  VERSAO: "1.0.0"
  AMBIENTE: "desenvolvimento"

# Jobs: Um workflow Ã© composto por um ou mais jobs, que rodam em paralelo por padrÃ£o.
jobs:
  # Nome do nosso primeiro job
  primeiro-job:
    # Runner: Define a mÃ¡quina virtual onde o job serÃ¡ executado. 'ubuntu-latest' Ã© uma boa escolha padrÃ£o.
    runs-on: ubuntu-latest

    # VariÃ¡veis especÃ­ficas do job
    env:
      NOME_JOB: "primeiro-job"
      TIMESTAMP: ${{ github.event.head_commit.timestamp }}

    # Steps: Uma sequÃªncia de tarefas que serÃ£o executadas no job.
    steps:
      - name: Imprime uma mensagem de boas-vindas
        run: echo "ğŸ‘‹ OlÃ¡, Mundo! Meu primeiro workflow com GitHub Actions estÃ¡ funcionando!"
      
      - name: Mostra o diretÃ³rio de trabalho
        run: pwd
      
      - name: Lista os arquivos no diretÃ³rio home
        run: ls ~
      
      - name: Exibe variÃ¡veis do projeto
        run: |
          echo "ğŸ“‹ InformaÃ§Ãµes do Projeto:"
          echo "Nome: ${{ env.NOME_PROJETO }}"
          echo "VersÃ£o: ${{ env.VERSAO }}"
          echo "Ambiente: ${{ env.AMBIENTE }}"
          echo "Job: ${{ env.NOME_JOB }}"
          echo "Timestamp: ${{ env.TIMESTAMP }}"
      
      - name: Exibe variÃ¡veis do GitHub
        run: |
          echo "ğŸ”§ VariÃ¡veis do GitHub:"
          echo "Repository: ${{ github.repository }}"
          echo "Branch: ${{ github.ref_name }}"
          echo "Commit SHA: ${{ github.sha }}"
          echo "Actor: ${{ github.actor }}"
          echo "Event: ${{ github.event_name }}"
      
      - name: Cria arquivo com variÃ¡veis
        run: |
          echo "NOME_PROJETO=${{ env.NOME_PROJETO }}" >> variaveis.txt
          echo "VERSAO=${{ env.VERSAO }}" >> variaveis.txt
          echo "AMBIENTE=${{ env.AMBIENTE }}" >> variaveis.txt
          echo "REPOSITORIO=${{ github.repository }}" >> variaveis.txt
          echo "BRANCH=${{ github.ref_name }}" >> variaveis.txt
          cat variaveis.txt