# Nome do Workflow
name: Aula 02 - Exemplo Completo de Dispatch com Inputs

# Gatilho (Trigger):
on:
  workflow_dispatch:
    # Este √© um exemplo completo que combina m√∫ltiplos tipos de inputs
    # para criar um formul√°rio de execu√ß√£o manual robusto e interativo.
    inputs:
      # Input do tipo 'choice' para selecionar um ambiente de uma lista predefinida.
      environment:
        description: 'Ambiente de destino do deploy'
        required: true
        type: choice
        options:
          - staging
          - production
        default: 'staging'

      # Input do tipo 'string' para o usu√°rio fornecer um texto livre, como a vers√£o.
      version:
        description: 'Tag da vers√£o para deploy (ex: 1.2.0)'
        required: true
        type: string

      # Input do tipo 'boolean' para uma a√ß√£o opcional de ligar/desligar.
      run_cleanup:
        description: 'Executar limpeza de cache ap√≥s o deploy?'
        required: true
        type: boolean
        default: false

jobs:
  deploy-and-log:
    runs-on: ubuntu-latest
    steps:
      - name: Exibe os par√¢metros de execu√ß√£o
        run: |
          echo "üöÄ Iniciando deploy..."
          echo "Ambiente: ${{ github.event.inputs.environment }}"
          echo "Vers√£o: ${{ github.event.inputs.version }}"
          echo "Limpeza de cache solicitada: ${{ github.event.inputs.run_cleanup }}"

      - name: Passo de Deploy (Simula√ß√£o)
        run: echo "Fazendo deploy da vers√£o ${{ github.event.inputs.version }} para o ambiente ${{ github.event.inputs.environment }}..."

      - name: Passo de Limpeza de Cache (Condicional)
        # Este passo s√≥ ser√° executado se a caixa 'run_cleanup' foi marcada pelo usu√°rio.
        if: github.event.inputs.run_cleanup == true
        run: echo "üßπ Executando a limpeza de cache..."